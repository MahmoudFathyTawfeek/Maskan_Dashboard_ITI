<div>

  <!-- Main Content -->
  <div class="col-md-10 col-12 p-4 w-100">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3>All Listings</h3>
      <a routerLink="/listings/add" class="btn btn-primary">+ Add Listing</a>
    </div>

  <div class="col-md-10 col-12 p-4">
  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Loading listings...</p>
  </div>

  <!-- No Results -->
  <div *ngIf="!loading && listings.length === 0" class="text-center my-5">
    <p>No listings found.</p>
  </div>

  <!-- Listings -->
  <div class="row" *ngIf="!loading && listings.length > 0">
    <!-- ...existing listing cards code... -->
  </div>
</div>

    <div class="row">
      <div class="col-md-3 mb-3" *ngFor="let listing of paginatedListings">
        <div class="card h-100 shadow-sm text-dark">

          <!-- Photos Carousel -->
          <div id="carousel-{{ listing._id }}" class="carousel slide" data-bs-ride="carousel" *ngIf="listing.photos?.length">
            <div class="carousel-inner">
              <div *ngFor="let photo of listing.photos; let i = index" [ngClass]="['carousel-item', i === 0 ? 'active' : '']">
                <img [src]="photo" class="d-block w-100" alt="{{ listing.title }}" style="height: 200px; object-fit: cover;">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" [attr.data-bs-target]="'#carousel-' + listing._id" data-bs-slide="prev">
              <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" [attr.data-bs-target]="'#carousel-' + listing._id" data-bs-slide="next">
              <span class="carousel-control-next-icon"></span>
            </button>
          </div>

          <div class="card-body">
  <h5 class="card-title">{{ listing.title }}</h5>

  <!-- Host Info -->
  <p class="card-text">
    <small class="text-muted">Host: {{ listing.host.userName }}</small>
  </p>

  <!-- Price -->
  <p class="card-text">
    <strong>Price:</strong> ${{ listing.pricePerNight }}/night
  </p>

  <!-- Category -->
  <p class="card-text">
    <strong>Category:</strong> {{ listing.categoryId.name }}
  </p>

  <!-- Location -->
  <p class="card-text">
    <strong>Location:</strong> {{ listing.location.address }}, {{ listing.governorate }}
  </p>

  <!-- Amenities -->
  <div *ngIf="listing.amenitiesId?.length">
    <strong>Amenities:</strong>
    <ul class="list-inline">
      <li class="list-inline-item" *ngFor="let amenity of listing.amenitiesId">
        {{ amenity.name }}
      </li>
    </ul>
  </div>

  <!-- Rating -->
  <p class="card-text" *ngIf="listing.averageRating">
    <strong>Rating:</strong> {{ listing.averageRating }}
  </p>

 <div class="d-flex justify-content-between mt-3">
  
 
    <button class="btn btn-warning me-2" [routerLink]="['/listings/update', listing._id]">Edit</button>
    <button class="btn btn-danger" (click)="listing._id && deleteListing(listing._id)">Delete</button>
 
</div>

</div>

  </div>


</div>

 <!-- Pagination -->
    <nav *ngIf="totalPages > 1" class="mt-4">
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="goToPage(currentPage - 1)">Previous</button>
        </li>
        <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" [class.active]="currentPage === i + 1">
          <button class="page-link" (click)="goToPage(i + 1)">{{ i + 1 }}</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="goToPage(currentPage + 1)">Next</button>
        </li>
      </ul>
    </nav>
